# BootMeetUp

С помощью Бота можно самостоятельно создать объявление о планируемом заезде, просто написав ему в личку! ☝️
Кто планирует велотренировку и не против компании, то с помощью бота можно создать заезды, которые будут размещаться на канале и не затеряются в потоке сообщений в обычных группах. К каждому объявлению создается чат, где можно обсудить и уточнить детали заезда, голосование о том кто присоединяется к заезду, прогноз погоды на дату и место заезда.

# BotMeetUp v.2

### Добавились следующие функции при создании объявления о велозаезде:

### Для пользователей:

- добавление картинки-обложки;
- добавление описания к заезду;
- таймер до старта заезда;
- выбор места мониторинга погоды по маршруту заезда;
- редактирование/удаление опубликованного объявления (до старта заезда);
- использование прошлых объявлений как шаблона для нового;

### Для админов бота/канала:

- добавление данных канала, группы в БД с помощью одой команды;
- добавление API-key через интерфейс телеграма;
- просмотр настроек бота через интерфейс телеграм;
- добавление/удаление мест старта через интерфейс телеграм;
- добавление/удаление к местам старта мест мониторинга погоды через интерфейс телеграм;

# BotMeetUp v.2.1

- добавление базы городов России с координатами (6800шт.);
- изменение способа выбора старта и места мониторинга погоды, выбор осуществляется из большой БД городов;
- добавление оплаты тикета для использования бота в своем канале объявлений;

# Первоначальная настройка бота, канала, группы.

### В главный каталог добавить файл .env со следующими настройками:

```
BOT_TOKEN="" # токен бота
MONGODB="" # подключение к MONGODB
MY_TELEGRAM_ID="" # user_id в телеграм
```

## Настройки в телеграм:

1. Создать канал;
2. Создать группу и привязать к каналу;
3. Создать бота у @BotFather;
4. Добавить бота в канал и группу;
5. Боту назначить админ-права. Запретить добавления бота в другие каналы у @BotFather;
6. В группе или в приватном сообщении боту запустить команду /myid, для получения вашего ID пользователя в телеграм. Сохранить его в файле .env;
7. В группе запустить команду /updategroup для сохранения данных группы в настройках бота;
8. В канале запустить команду /updatechannel для сохранения данных канала в настройках бота;
9. Командой /setup добавить API-key для мониторинга с сайта [openweathermap.org](https://openweathermap.org/api) (сначала необходимо зарегистрироваться и получить API-key);
10. Добавить дополнительные города, которых нет в общей БД - /location;

# Команды бота:

**_/start_** стартовое приветствие, краткая информация о боте;  
**_/help_** список доступных команд для пользователей;  
**_/rideon_** создание объявления о заезде;  
**_/edit_** редактирование/удаления объявления до старта заезда. Телеграм позволяет ботам удалять сообщения в течении 48 часов после их публикации;

**_/helpA_** список доступных команд для админа;  
**_/ticket_** приобретение/продление тикета для использования бота на своем канале;
**_/myid_** узнать свой ID пользователя телеграм;  
**_/updategroup_** добавление данных группы (id, title ) в БД;  
**_/updatechannel_** добавление данных канала (id, name, title ) в БД;  
**_/setup_** добавление API ключа от сервера погоды;  
**_/location_** добавление/удаление городов (дополнительная БД);  
**_/config_** просмотр всех настроек бота, сохраненных в БД;
